"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("../extension-functions/types");
const utils_1 = require("./utils");
const mapSQLRows = (rows, options) => isDataFormatJSON(options)
    ? utils_1.defaultToWhenInvalidArray([], rows).map(mapSQLRowToJSON)
    : rows;
exports.mapSQLRows = mapSQLRows;
const mapSQLRowToJSON = (row) => utils_1.defaultToWhenInvalidArray([], row).reduce(addColumnAsJSONField, {});
exports.mapSQLRowToJSON = mapSQLRowToJSON;
const addColumnAsJSONField = (jsonRow, column) => (Object.assign({}, jsonRow, { [column.metadata.colName]: column.value }));
exports.addColumnAsJSONField = addColumnAsJSONField;
const isDataFormatJSON = (options) => options && options.format === types_1.execSqlAsyncDataFormat.json;
//# sourceMappingURL=sqlToJsonUtils.js.map